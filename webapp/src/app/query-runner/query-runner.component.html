<mat-tab-group [(selectedIndex)]="tabIndex">
  <mat-tab label="Train Model">
    <div>
      <p>
        Below, you can train a
        <a href="https://en.wikipedia.org/wiki/Logistic_regression">
          logistic regression model
        </a>
        across the datasets. Then, the trained model is used to predict the
        outcome of the given row.
      </p>
    </div>

    <form
      [formGroup]="queryBuilder"
      (ngSubmit)="runQuery(throwOnUndefined(buildQuery()))"
    >
      <mat-list>
        <mat-list-item>
          <mat-form-field>
            <mat-label>Learning rate</mat-label>
            <input
              matInput
              type="number"
              min="0.01"
              max="1"
              step="0.01"
              formControlName="learningRate"
            />
          </mat-form-field>
        </mat-list-item>

        <mat-list-item>
          <mat-form-field>
            <mat-label>Elastic rate</mat-label>
            <input
              matInput
              type="number"
              min="0.01"
              max="1"
              step="0.01"
              formControlName="elasticRate"
            />
          </mat-form-field>
        </mat-list-item>

        <mat-list-item>
          <mat-form-field>
            <mat-label>Local iteration count</mat-label>
            <input
              matInput
              type="number"
              min="1"
              formControlName="localIterationCount"
            />
          </mat-form-field>
        </mat-list-item>

        <mat-list-item>
          <mat-form-field>
            <mat-label>Local batch size</mat-label>
            <input
              matInput
              type="number"
              min="1"
              formControlName="localBatchSize"
            />
          </mat-form-field>
        </mat-list-item>

        <mat-list-item>
          <mat-form-field>
            <mat-label>Network iteration count (epochs)</mat-label>
            <input
              matInput
              type="number"
              min="1"
              formControlName="networkIterationCount"
            />
          </mat-form-field>
        </mat-list-item>

        <mat-list-item>
          <mat-form-field>
            <mat-label>To predict</mat-label>
            <input matInput type="text" formControlName="toPredict" />
          </mat-form-field>
        </mat-list-item>

        <mat-list-item>
          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="!queryBuilder.valid"
          >
            Launch
          </button>
        </mat-list-item>
      </mat-list>
    </form>
  </mat-tab>

  <mat-tab label="Result">
    <ng-container
      *ngIf="
        state[0] === 'loading' ||
        state[0] === 'errored' ||
        state[0] === 'loaded'
      "
    >
      <div>
        <p>Training model and predicting &ndash; {{ state[1] }}s / 20-40s</p>
      </div>
    </ng-container>

    <ng-container *ngIf="state[0] === 'loading'">
      <mat-progress-bar mode="buffer"></mat-progress-bar>
    </ng-container>

    <ng-container *ngIf="state[0] === 'errored'">
      <div>
        <p>
          Error encountered when training model and predicting:
          {{ state[2].message }}
        </p>
      </div>
    </ng-container>
    <ng-container *ngIf="state[0] === 'loaded'">
      <div>
        <p>
          The trained model predicts that the given row's result will be:
          <b>{{ state[2] }}</b>
        </p>
      </div>
    </ng-container>
  </mat-tab>
</mat-tab-group>
